# Odoo-Style Frontend Essential Features Implementation Guide

> Reference: Odoo Official Documentation (https://www.odoo.com/documentation/17.0/applications/essentials/)
> 
> Important: All files listed below MUST be generated.

---
## Generation Sequence
The guide must proceed in the following order:

Review entire guide content â†’ Create file structure â†’ Generate files based on feature implementation requirements â†’ Validate file generation (check for missing files and regenerate) â†’ Validate components under Frontend â†’ Connect generated files and components based on Odoo guide â†’ Check and fix errors after connection -> Install node_modules (node 22)

## ðŸ“ Required File Generation List

### 1. Utilities
```
src/utils/
â”œâ”€â”€ exportUtils.ts       # CSV/Excel/XML export (exportToCSV, exportToExcel, exportToXML, exportData)
â”œâ”€â”€ importUtils.ts       # CSV/Excel/XML import (parseCSV, parseExcel, parseXML, importData)
â”œâ”€â”€ filterUtils.ts       # Filter and domain processing (buildFilter, applyFilter)
â””â”€â”€ constants.ts         # Constant definitions
```

### 2. Common Components
```
src/components/common/
â”œâ”€â”€ AdvancedSearch.tsx   # Integrated quick search, advanced filters, grouping, favorites
â”œâ”€â”€ ExportDialog.tsx     # Format selection (CSV/Excel/XML), field selection, include ID option
â”œâ”€â”€ ImportDialog.tsx     # File upload, field mapping, preview
â”œâ”€â”€ FilterBuilder.tsx    # Create filters with field/operator/value selection
â”œâ”€â”€ GroupBySelector.tsx  # Multi-grouping selection
â”œâ”€â”€ FavoriteSearch.tsx   # Save/load favorites
â””â”€â”€ Comparison.tsx       # Period-based data comparison
```

### 3. Chatter Components
```
src/components/Chatter/
â”œâ”€â”€ Chatter.tsx          # Tab-based integrated component (messages/activities/followers/history)
â”œâ”€â”€ MessageList.tsx      # Display message list
â”œâ”€â”€ MessageInput.tsx     # Compose message (file attachment, mentions)
â”œâ”€â”€ ActivityList.tsx     # Activity list (todo/meeting/call/email)
â”œâ”€â”€ ActivityScheduler.tsx # Create/modify activity schedule
â””â”€â”€ FollowerList.tsx     # Add/remove followers
```

### 4. Activity Components
```
src/components/Activities/
â”œâ”€â”€ ActivitiesDashboard.tsx  # Tabs: Scheduled/Overdue/Completed
â”œâ”€â”€ ActivityCard.tsx         # Single activity card
â”œâ”€â”€ ActivityScheduler.tsx    # Activity schedule dialog
â””â”€â”€ ActivityReminder.tsx     # Notification settings
```

### 5. Report Components
```
src/components/Reports/
â”œâ”€â”€ ReportBuilder.tsx    # Select chart type, data source, grouping, aggregation
â”œâ”€â”€ ReportViewer.tsx     # Display generated reports
â”œâ”€â”€ ChartBuilder.tsx     # Chart.js-based chart creation
â””â”€â”€ PivotTable.tsx       # Pivot table
```

### 6. Automation Components
```
src/components/Automation/
â”œâ”€â”€ AutomationBuilder.tsx    # Complete trigger/condition/action builder
â”œâ”€â”€ AutomationList.tsx       # Automation rules list
â”œâ”€â”€ TriggerConfig.tsx        # Trigger type settings (create/update/delete/scheduled)
â””â”€â”€ ActionConfig.tsx         # Action type settings (email/field update/record creation)
```

### 7. Dashboard Components
```
src/components/Dashboard/
â”œâ”€â”€ Dashboard.tsx        # Widget layout (drag & drop support)
â”œâ”€â”€ DashboardWidget.tsx  # Individual widget wrapper
â”œâ”€â”€ WidgetConfig.tsx     # Widget configuration dialog
â””â”€â”€ WidgetLibrary.tsx    # Available widget catalog
```

---

## ðŸ”§ Feature-Specific Implementation Requirements

### 1. Export/Import (exportUtils.ts, ExportDialog.tsx, ImportDialog.tsx)

#### exportUtils.ts Required Functions
```typescript
// Required implementation functions
export const exportToCSV(data: any[], fields: string[], filename?: string): void
export const exportToExcel(data: any[], fields: string[], filename?: string): void
export const exportToXML(data: any[], fields: string[], filename?: string): void
export const exportData(format: 'csv'|'xlsx'|'xml', data: any[], fields: string[], filename?: string): void

// Helper functions
const getNestedValue(obj: any, path: string): any
const escapeXml(str: string): string
const downloadBlob(blob: Blob, filename: string): void
```

#### ExportDialog.tsx Required Features
- File format selection: CSV, Excel, XML (radio buttons)
- Field selection: Multi-select with checkboxes, select all/deselect all buttons
- Include ID option: Checkbox
- Disable export button when no fields selected

#### ImportDialog.tsx Required Features
- 3-step process: Upload â†’ Mapping â†’ Preview
- File upload: Support .csv, .xlsx, .xml
- Field mapping: Match file columns â†’ DB fields
- Preview: Display first 5 rows

---

### 2. Search and Filter (AdvancedSearch.tsx, FilterBuilder.tsx, GroupBySelector.tsx)

#### AdvancedSearch.tsx Required Props
```typescript
interface AdvancedSearchProps {
  filters: Filter[];
  groupBy: GroupBy[];
  onFilterChange: (filters: Filter[]) => void;
  onGroupByChange: (groupBy: GroupBy[]) => void;
  onQuickFilter: (query: string) => void;
  availableFields: Array<{ name: string; label: string; type: string }>;
  savedFilters?: Array<{ id: string; name: string; filters: Filter[] }>;
}

interface Filter {
  field: string;
  operator: '=' | '!=' | '>' | '<' | '>=' | '<=' | 'like' | 'in' | 'not in';
  value: any;
  label?: string;
}
```

#### Required Features
- Quick search: TextField with SearchIcon
- Advanced filters: Display FilterBuilder in dialog
- Favorites: Saved filter list dialog
- Current filters/groups: Display as chips, deletable

#### FilterBuilder.tsx Required Features
- Field selection (Select)
- Operator selection (Select): =, !=, >, <, >=, <=, like, in, not in
- Value input (TextField)
- "Add Filter" button

#### GroupBySelector.tsx Required Features
- Add grouping basis (Select)
- Selected groups: Display order as chips (1. Field name, 2. Field name)
- Remove group: Delete chip

---

### 3. Activities (ActivitiesDashboard.tsx, ActivityCard.tsx)

#### ActivitiesDashboard.tsx Required Props
```typescript
interface Activity {
  id: string;
  type: 'todo' | 'meeting' | 'call' | 'email';
  title: string;
  dueDate: string;
  assignedTo: string;
  modelName: string;
  recordId: number;
  status: 'pending' | 'done' | 'overdue';
  priority: 'low' | 'normal' | 'high';
}

interface ActivitiesDashboardProps {
  userId: string;
  activities: Activity[];
  onActivityClick?: (activity: Activity) => void;
}
```

#### Required Features
- 3 tabs: Scheduled (badge: pendingCount), Overdue (badge: overdueCount), Completed
- Activity icons: todo â†’ Task, meeting â†’ Event, call â†’ Phone, email â†’ Email
- Priority colors: high â†’ error, normal â†’ warning, low â†’ default
- Call onActivityClick when list item clicked

---

### 4. Reports (ReportBuilder.tsx, ChartBuilder.tsx)

#### ReportBuilder.tsx Required Props
```typescript
interface ReportConfig {
  chartType: 'bar' | 'line' | 'pie' | 'scatter';
  dataSource: string;
  groupBy: string[];
  aggregations: Array<{ field: string; function: 'sum'|'avg'|'count'|'min'|'max' }>;
  filters: any[];
}

interface ReportBuilderProps {
  model: string;
  availableFields: Array<{ name: string; label: string; type: string }>;
  onSave?: (config: ReportConfig) => void;
}
```

#### Required Features
- Chart type selection: Bar/Line/Pie/Scatter (Select)
- Grouping basis: Multi-select (Select multiple)
- Aggregation functions: Select sum/avg/count/min/max
- Create button: Load and display chart data
- Save button: Call onSave callback

#### Chart.js Integration
```typescript
import { Chart as ChartJS, ArcElement, CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend } from 'chart.js';
import { Bar, Pie, Line, Scatter } from 'react-chartjs-2';

ChartJS.register(ArcElement, CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend);
```

---

### 5. Chatter (Chatter.tsx, MessageList.tsx, ActivityList.tsx, FollowerList.tsx)

#### Chatter.tsx Required Props
```typescript
interface ChatterProps {
  recordId: number;
  model: string;
  features?: Array<'messages' | 'activities' | 'followers' | 'history'>;
}
```

#### Required Features
- 4 tabs: Messages, Activities, Followers, History
- Display icons for each tab
- Display corresponding component when tab switched

#### MessageList.tsx
- Display message list (reverse order)
- Display author, content, creation date/time

#### ActivityList.tsx
- Display activity list
- Add activities through ActivityScheduler

#### FollowerList.tsx
- Display follower list
- Add/remove follower buttons

---

### 6. Automation (AutomationBuilder.tsx, TriggerConfig.tsx, ActionConfig.tsx)

#### AutomationBuilder.tsx Required Structure
```typescript
interface Automation {
  id: string;
  name: string;
  trigger: { type: 'create'|'update'|'delete'|'scheduled'; model: string; conditions?: any };
  actions: Array<{ type: 'email'|'field_update'|'create_record'; config: any }>;
  active: boolean;
}
```

#### TriggerConfig.tsx Required Features
- Trigger type selection: Record creation, modification, deletion, scheduled
- Model selection
- Condition settings (reuse FilterBuilder)

#### ActionConfig.tsx Required Features
- Action type selection: Send email, update field, create record
- Detailed setting UI for each action

---

### 7. Dashboard (Dashboard.tsx, DashboardWidget.tsx, WidgetConfig.tsx)

#### Dashboard.tsx Required Features
- Widget layout (grid-based)
- Drag & drop support (react-grid-layout recommended)
- Add/remove widgets
- Save/load layout

#### DashboardWidget.tsx Required Props
```typescript
interface WidgetProps {
  id: string;
  type: 'kpi' | 'chart' | 'list' | 'gauge';
  title: string;
  config: any;
  data?: any;
}
```

#### WidgetConfig.tsx Required Features
- Widget type selection
- Data source selection
- Widget-specific option settings

---

### 8. List Page Integration Pattern

```typescript
export const [Aggregate]ListPage: React.FC = () => {
  const [selected, setSelected] = useState<any | null>(null);
  const [filters, setFilters] = useState<Filter[]>([]);
  const [groupBy, setGroupBy] = useState<GroupBy[]>([]);

  return (
    <Container maxWidth="xl">
      {/* Advanced Search - Always at top */}
      <Paper sx=\{{ p: 2, mb: 2 }}>
        <AdvancedSearch
          filters={filters}
          groupBy={groupBy}
          onFilterChange={setFilters}
          onGroupByChange={setGroupBy}
          onQuickFilter={(q) => console.log('Quick search:', q)}
          availableFields={metadata.fields}
        />
      </Paper>

      {/* Action Bar */}
      <Paper sx=\{{ p: 2, mb: 2 }}>
        <Box sx=\{{ display: 'flex', gap: 1, justifyContent: 'space-between' }}>
          <Box sx=\{{ display: 'flex', gap: 1 }}>
            {/* Command buttons */}
            {commands.filter(c => !c.isRestRepository).map(cmd => (
              <[Command]Button key={cmd.name} selected={selected} />
            ))}
          </Box>
          <Box sx=\{{ display: 'flex', gap: 1 }}>
            <Button startIcon={<Download />} onClick={() => setShowExport(true)}>Export</Button>
            <Button startIcon={<Upload />} onClick={() => setShowImport(true)}>Import</Button>
          </Box>
        </Box>
      </Paper>

      {/* Table */}
      <[Aggregate]Table
        data={data}
        onRowClick={setSelected}
        selectedItem={selected}
        filters={filters}
        groupBy={groupBy}
      />

      {/* Export/Import Dialogs */}
      <ExportDialog open={showExport} onClose={() => setShowExport(false)} ... />
      <ImportDialog open={showImport} onClose={() => setShowImport(false)} ... />
    </Container>
  );
};
```

---

## Generation Rules

1. Use Material-UI: All components must use @mui/material
2. TypeScript: All Props must be explicitly typed with interfaces
3. Icons: Use @mui/icons-material
4. Dialog Pattern: Close button (top right), DialogActions (bottom)
5. Error Handling: Use try-catch for error handling, log with console.error
6. Korean Support: Add BOM ('\uFEFF'), include timestamp in filename
7. Reusability: FilterBuilder, GroupBySelector etc. must be imported and reused in other components


## Component Integration
1. For Export/Import, Search and Filter: Connect identically to each Aggregate component (AccountingEntry, TaxRate, Lead, BillingPolicy, QuoteInvoice) under frontend
2. For Reports, Activities, Chat, Dashboard: Must be connected to App.tsx and displayed on main page, shown at bottom of main card view rather than sidebar
